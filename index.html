<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Space Empire â€“ Galaxy View</title>
<style>
html, body {
  margin: 0;
  padding: 0;
  overflow: hidden;
  background: black;
  font-family: Arial, sans-serif;
  color: white;
}

canvas {
  display: block;
}

/* HUD */
#hud {
  position: absolute;
  top: 10px;
  left: 170px;
  font-size: 14px;
  line-height: 1.4;
}

/* Fleet panel */
#fleetPanel {
  position: absolute;
  top: 0;
  left: 0;
  width: 160px;
  height: 100%;
  background: rgba(20,20,20,0.9);
  border-right: 1px solid #333;
  padding: 10px;
  box-sizing: border-box;
}

#fleetPanel h3 {
  margin: 0 0 10px 0;
  font-size: 14px;
  text-align: center;
}

.fleetItem {
  border: 1px solid #333;
  padding: 8px;
  margin-bottom: 8px;
  cursor: pointer;
  background: #111;
}

.fleetItem:hover {
  background: #1a1a1a;
}

.fleetName {
  color: #4cff4c;
  font-weight: bold;
}

.fleetState {
  font-size: 12px;
  opacity: 0.8;
}
</style>
</head>
<body>

<div id="fleetPanel">
  <h3>FLEETS</h3>
  <div id="fleetList"></div>
</div>

<div id="hud">
  <div>ðŸŒŒ Galaxy View</div>
  <div>ðŸŸ¢ Fleet</div>
  <div>âšª Stars</div>
  <div>Click = preview</div>
  <div>Click again = confirm</div>
  <div>ESC = cancel preview</div>
  <div>SPACE = Pause</div>
</div>

<canvas id="game"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

function resize() {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
window.addEventListener("resize", resize);
resize();

/* Camera */
const camera = {
  x: 0,
  y: 0,
  zoom: 1
};

/* Simulation */
let paused = false;

/* Stars */
const stars = [];
for (let i = 0; i < 40; i++) {
  stars.push({
    x: (Math.random() - 0.5) * 3000,
    y: (Math.random() - 0.5) * 3000
  });
}

/* Fleets (scalable) */
const fleets = [
  {
    id: 1,
    name: "Fleet 1",
    x: 0,
    y: 0,
    target: null,
    speed: 120,
    state: "IDLE",
    eta: 0
  }
];

/* UI references */
const fleetList = document.getElementById("fleetList");

/* Build fleet panel */
function renderFleetPanel() {
  fleetList.innerHTML = "";
  fleets.forEach(fleet => {
    const div = document.createElement("div");
    div.className = "fleetItem";
    div.onclick = () => centerCameraOnFleet(fleet);

    div.innerHTML = `
      <div class="fleetName">${fleet.name}</div>
      <div class="fleetState">${fleet.state}</div>
    `;

    fleetList.appendChild(div);
  });
}

function centerCameraOnFleet(fleet) {
  camera.x = fleet.x;
  camera.y = fleet.y;
}

renderFleetPanel();

/* Input */
let previewTarget = null;

canvas.addEventListener("click", e => {
  const rect = canvas.getBoundingClientRect();
  const mx = (e.clientX - rect.left - canvas.width / 2) / camera.zoom + camera.x;
  const my = (e.clientY - rect.top - canvas.height / 2) / camera.zoom + camera.y;

  if (!previewTarget) {
    previewTarget = { x: mx, y: my };
  } else {
    const fleet = fleets[0];
    fleet.target = { x: previewTarget.x, y: previewTarget.y };
    fleet.state = "MOVING";
    previewTarget = null;
  }
});

window.addEventListener("keydown", e => {
  if (e.code === "Escape") previewTarget = null;
  if (e.code === "Space") paused = !paused;
});

/* Update */
function update(dt) {
  fleets.forEach(fleet => {
    if (fleet.state === "MOVING" && fleet.target && !paused) {
      const dx = fleet.target.x - fleet.x;
      const dy = fleet.target.y - fleet.y;
      const dist = Math.hypot(dx, dy);

      fleet.eta = dist / fleet.speed;

      if (dist < 1) {
        fleet.x = fleet.target.x;
        fleet.y = fleet.target.y;
        fleet.target = null;
        fleet.state = "IDLE";
      } else {
        fleet.x += (dx / dist) * fleet.speed * dt;
        fleet.y += (dy / dist) * fleet.speed * dt;
      }
    }
  });

  renderFleetPanel();
}

/* Draw */
function draw() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  ctx.save();
  ctx.translate(canvas.width / 2, canvas.height / 2);
  ctx.scale(camera.zoom, camera.zoom);
  ctx.translate(-camera.x, -camera.y);

  /* Stars */
  ctx.fillStyle = "white";
  stars.forEach(s => {
    ctx.beginPath();
    ctx.arc(s.x, s.y, 3, 0, Math.PI * 2);
    ctx.fill();
  });

  /* Preview */
  if (previewTarget) {
    const fleet = fleets[0];
    ctx.strokeStyle = "red";
    ctx.setLineDash([5, 5]);
    ctx.beginPath();
    ctx.moveTo(fleet.x, fleet.y);
    ctx.lineTo(previewTarget.x, previewTarget.y);
    ctx.stroke();
    ctx.setLineDash([]);
  }

  /* Fleets */
  fleets.forEach(fleet => {
    ctx.fillStyle = "lime";
    ctx.beginPath();
    ctx.arc(fleet.x, fleet.y, 8, 0, Math.PI * 2);
    ctx.fill();

    if (fleet.state === "MOVING") {
      ctx.fillStyle = "lime";
      ctx.font = "12px Arial";
      ctx.fillText(
        `MOVING (${fleet.eta.toFixed(1)}s)`,
        fleet.x + 10,
        fleet.y - 10
      );
    }
  });

  ctx.restore();
}

/* Loop */
let last = performance.now();
function loop(now) {
  const dt = (now - last) / 1000;
  last = now;
  update(dt);
  draw();
  requestAnimationFrame(loop);
}
loop(last);
</script>

</body>
</html>
